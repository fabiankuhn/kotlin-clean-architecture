-- H2 2.1.214; 
;              
CREATE USER IF NOT EXISTS "SA" SALT 'd40dd252edbf89f4' HASH '4b53f859926dc9510316e58513a3360bd3655443428d3c4cb3450a25fb02c8a2' ADMIN;          
CREATE MEMORY TABLE "PUBLIC"."order"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "CUSTOMER_ID" CHARACTER VARYING(255),
    "ORDER_DATE" TIMESTAMP,
    "TOTAL_PRICE" DOUBLE PRECISION
);     
ALTER TABLE "PUBLIC"."order" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_6" PRIMARY KEY("ID");         
-- 0 +/- SELECT COUNT(*) FROM PUBLIC."order";  
CREATE MEMORY TABLE "PUBLIC"."order_position"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "AMOUNT" BIGINT,
    "product_id" CHARACTER VARYING(255),
    "ORDER_ID" BIGINT
); 
ALTER TABLE "PUBLIC"."order_position" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_D" PRIMARY KEY("ID");
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.order_position;           
CREATE MEMORY TABLE "PUBLIC"."product"(
    "ID" CHARACTER VARYING(255) NOT NULL,
    "NAME" CHARACTER VARYING(255),
    "PRICE" DOUBLE PRECISION
);           
ALTER TABLE "PUBLIC"."product" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_E" PRIMARY KEY("ID");       
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.product;  
INSERT INTO "PUBLIC"."product" VALUES
('1', 'Apfel', 5.0),
('2', 'Birne', 8.0);
CREATE MEMORY TABLE "PUBLIC"."stock"(
    "ID" CHARACTER VARYING(255) NOT NULL,
    "AMOUNT" BIGINT,
    "product_id" CHARACTER VARYING(255)
);
ALTER TABLE "PUBLIC"."stock" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_68" PRIMARY KEY("ID");        
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.stock;    
INSERT INTO "PUBLIC"."stock" VALUES
('1', 2, '1'),
('2', 3, '2');              
ALTER TABLE "PUBLIC"."order_position" ADD CONSTRAINT "PUBLIC"."FK274E0DBLNCYXR668I95X8PUKK" FOREIGN KEY("product_id") REFERENCES "PUBLIC"."product"("ID") NOCHECK;             
ALTER TABLE "PUBLIC"."order_position" ADD CONSTRAINT "PUBLIC"."FKEVH0Y4CIUA13VVGPS4SPFD7QD" FOREIGN KEY("ORDER_ID") REFERENCES "PUBLIC"."order"("ID") NOCHECK; 
ALTER TABLE "PUBLIC"."stock" ADD CONSTRAINT "PUBLIC"."FKJJYM7LJRRRVQE9BNLXQ4A6ILH" FOREIGN KEY("product_id") REFERENCES "PUBLIC"."product"("ID") NOCHECK;      
